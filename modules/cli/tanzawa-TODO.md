# SQLコンソール（Tanzawa）TODO事項

## 共通

- トランザクションオプション（--read-area-include等）の処理を追加
  - tsubakuroのTransactionOption対応待ち
- 暗黙にコミットする際（--commitや--auto-commit）のCommiStatusを指定する
  - 新しいパラメーターを増やす？

## SQL console（REPL）

### コマンド

- `\halt` が入力されたとき、トランザクションが生きていたら、ロールバックを実行するべき？
- （2022-09-22済）`\exit` を `\e` などと省略できるようにする
- `\` や `\?` がSQLコマンドとしてDBサーバーで実行されてしまうので、実行せずにエラーにしたい
    - （2022-09-22荒川さん済）`\?`
- （2022-09-15荒川さん済）`\help SELECT` のようなコマンドで、文法の詳細（利用可能なオプション等）を表示してほしい（最低限、BEGINとCOMMIT）（by川口さん）
- ヘルプの日本語化（by荒川さん2022-09-20）
- コマンド名の変更・追加（by荒川さん2022-09-15）
  - `\show tables` - テーブル一覧を表示する（そんなAPIがない）
  - （2022-09-22済）`\show table TBL` - テーブル定義（TableMetaData）を表示する
  - （2022-09-22済）`\show transaction` - `\status` がいまいちなので置き換え
  - `\exit force` - `\halt` 相当
  - （2022-10-11済）`\set client setting` - 設定するものがあれば？
- （2022-10-07済）EXPLAINの表示（by荒川さん2022-09-20）
- データベース一覧・スキーマ一覧を表示するコマンドを追加（by川口さん2022-09-15）
  - 現在、データベース・スキーマ自体が未対応

### 操作

- （2022-09-15済）現在入力中のステートメントをCtrl+Cでキャンセルしたい
- （2022-10-17済）SQL実行中にCtrl+Cで停止させる
- タブキーで入力補完したい
  - （2022-09-29済）簡易的な入力補完は可能
  - SQLの本格的な入力補完にはパーサーの補助が必要
- Ctrl+D（EOF）が入力されたとき、トランザクションが生きていたら、ロールバックを実行するべき？
- （2022-09-15済）Ctrl+Dを2回押さないと終了しないことが多い（1回で終了させたい）（by川口さん）
- コマンドを他所からコピーしてペーストすると、選択状態になってしまう（MacのiTerm2）（by川口さん）
  - Windowsのコマンドプロンプトでは起きない

### 表示

- select結果を整形して表示する
  - 現在はList.toString()をそのまま表示している
- （2022-09-14済）selectされた件数を表示する（by川口さん）
- 更新系SQLの実行結果（処理件数）を表示する
  - 現在のtsubakuroは処理件数を返さない
- （2022-10-11済）文法エラー（EngineException）のメッセージに含まれる行番号を無くす？（1行入力する度に行番号が増えていく為）→ステートメント毎に行番号を1に戻す
  - 行番号は、本来はスクリプトファイル向け

### その他

- （2022-09-20済）コマンドの履歴を次の起動時にも引き継いでほしい（by川口さん）
  - （2022-09-26済）履歴ファイルからの読み込み時に同じ履歴を排除する（2022-09-22）
- 履歴の管理方法の変更（[bashのHISTCONTROL](https://qiita.com/kuryus/items/47d1d64a1c424275c802)のような設定）が出来るようにしてほしい（by川口さん2022-09-22）
- プレースホルダとその値を別々に指定する機能（SQL*Plusの置換変数のような機能）があると便利（by川口さん2022-09-22）